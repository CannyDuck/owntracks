<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="OwnTracks.org">
        <link rel="canonical" href="http://owntracks.org/features/friends/">
        <link rel="shortcut icon" href="../../favicon.ico">
        

	<title>Friends - OwnTracksDoc</title>

        <link href="../../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">OwnTracksDoc</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Intro</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Guide <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../guide/what/">What it does</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/how/">How it works</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/ui/">User interface</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/scenarios/">Scenarios</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/mqtt/">MQTT</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/topics/">Topics</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/broker/">Broker</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/apps/">Apps</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/clients/">Clients</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/friends/">Friends</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/waypoints/">Waypoints</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/beacons/">iBeacons</a>
                        </li>
                    
                        <li >
                            <a href="../../guide/bridge/">Bridging</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../hosted/">Hosted</a>
                        </li>
                    
                        <li >
                            <a href="../security/">Security</a>
                        </li>
                    
                        <li >
                            <a href="../tid/">TID</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Friends</a>
                        </li>
                    
                        <li >
                            <a href="../card/">Card</a>
                        </li>
                    
                        <li >
                            <a href="../waypoints/">Waypoints</a>
                        </li>
                    
                        <li >
                            <a href="../beacons/">Beacons</a>
                        </li>
                    
                        <li >
                            <a href="../pedometer/">Pedometer</a>
                        </li>
                    
                        <li >
                            <a href="../settings/">Settings</a>
                        </li>
                    
                        <li >
                            <a href="../debug/">Debugging</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../tech/json/">JSON</a>
                        </li>
                    
                        <li >
                            <a href="../../tech/program/">Code</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sundry <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../terminology/">Terminology</a>
                        </li>
                    
                        <li >
                            <a href="../../people/">People</a>
                        </li>
                    
                        <li >
                            <a href="../../ideas/">Ideas</a>
                        </li>
                    
                        <li >
                            <a href="../../faq/">Answers</a>
                        </li>
                    
                        <li >
                            <a href="../../press/">Press</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../tid/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../card/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/owntracks">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#friends">Friends</a></li>
        
            <li><a href="#faces">Faces</a></li>
        
            <li><a href="#who-is-that">Who is that?</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="friends">Friends</h1>
<p>OwnTracks has a so-called <em>Friends and Family</em> capability which is enabled by
default. The way this works is friends and/or family members who share a single
<a href="../../guide/broker/">MQTT broker</a> can "see" eachother on the map, respectively on a
list of friends held by the app.  (This can be done either by configuring all
apps to use the same broker or by what is called <em>bridging</em>.)</p>
<p>Let's assume for a moment, that a user Jane (user name <code>jjolie</code>) has an iPhone 4s (device name <code>4s</code>), and that she publishes location data to a topic at</p>
<pre><code>owntracks/jjolie/4s
</code></pre>

<p>Let us further assume, that her friend John (user name <code>john</code>) has an Android Nexus 4 (device name <code>nex4</code>) and he therefore publishes on the <em>same broker</em> to a topic called</p>
<pre><code>owntracks/john/nex4
</code></pre>

<p>Let us further assume that access control on the <a href="../../guide/broker/">MQTT broker</a> allows both users to subscribe to eachother's topics.</p>
<p>Now, if <em>both</em> friends subscribe to a topic called <code>owntracks/+/+</code> (which the
apps do by default) their devices will effectively receive published location
messages to either topic. So when either Jane or John publish their location,
the other's device will receive it.</p>
<p>What OwnTracks then does is to list these topic names (e.g. <code>owntracks/jjolie/4s</code>) with the last received position and a time stamp. A click on a particular entry will take you to that entry's location on the map. Neat, eh?</p>
<h3 id="faces">Faces</h3>
<p>It gets better.</p>
<p>You probably don't want to remember the (sometimes cryptic) topic names of your friends or family members, but you would like to see their names and a matching face. That's no problem: OwnTracks can do that.</p>
<p>Depending on the device you're using, the procedure differs slightly.</p>
<h4 id="android">Android</h4>
<p>The app subscribes to a topic branch <code>owntracks/+/+</code> on the broker per default
(but this can be configured in advanced preferences) to receive locations of
other people connected to the the same [[MQTT broker|MQTTbroker]] that publish
to the default topic of <code>mqttittude/$username/$devicename</code>.</p>
<p>When the app receives a message published by a different user, it looks for a
contact with an instant messenger (<code>IM</code>) entry of type "<code>OwnTracks</code>" (case insensitive)
whose entry value is equal to the topic of the received location
publish. If a contact is found, the contact is shown with its profile picture
and name instead of the topic in the list and on the map.</p>
<p>Note that if you add an IM entry to a contact via, say, Google, you have to
sync the contact to your phone (phone preferences/accounts/google/sync untick
and tick contacts, wait a few seconds) and restart the app. In other words, the
contact's data must be on your device.</p>
<p>Add an instant-messaging (<code>IM</code>) entry to the contact you want to associate with
a particular MQTT topic name. The tag of the <code>IM</code> should be "<code>OwnTracks</code>" (case
independent), and the value is the topic name.</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/android/b-contact-address.png" /></p>
<p>The <em>Locations</em> list will then show you your contact's name and photo:</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/android/b-locations01.png" /></p>
<h4 id="ios">iOS</h4>
<p>The app "sees" a friend as soon as it receives a publish to the topic branch subscribed to, which by default is <code>owntracks/+/+</code>.</p>
<p>Select the <em>Friends</em> button to see a list of friends:</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/friends/ios/ios-friends-01.png" /></p>
<p>Tapping on one of the friends, performs a reverse geo-coding to show address. Furthermore, a click on the little right-arrow shows the last location and
all shared waypoints of that friend.</p>
<h2 id="who-is-that">Who is that?</h2>
<p>It's difficult to remember which MQTT topic belongs to which friend, so we can associate a topic with an image of the friend as contained in the iOS address book:</p>
<p>Select an entry:</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/friends/ios/ios-friends-02.png" /></p>
<p>Then click on the <em>bookmark</em> icon on top right. The Address book opens.</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/friends/ios/ios-friends-09.png" /></p>
<p>Select the entry you want to associate with the OwnTracks topic. In this
example, I choose Kate Bell.</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/friends/ios/ios-friends-04.png" /></p>
<p>We're back in OwnTracks, and we see the picture from the addressbook.
If you want to release the association, select the wastepaper basket icon in the address book screen. The display
changes back from the picture and name of the friend to the mqtt topic (e.g. "owntracks/kate/nexus4").</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/friends/ios/ios-friends-05.png" /></p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/friends/ios/ios-friends-06.png" /></p>
<p>When you zoom the map out (or near to the friend's location), you see a small rendition of the icon directly on the map.</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/friends/ios/ios-friends-07.png" /></p>
<p>Voila!</p>
<p>Note: this works only with contacts stored locally -- not with corporate address books associated with your iPhone.</p>
<p>To support corporate address books (which usually cannot be updated) the ios
app Version &gt;=5.1 can be set to store the associations locally rather than in
the address book. You find the respective switch in the expert mode settings.
Switch it <code>off</code> (i.e. disabled) to keep associations between MQTT topics and 
your contact within OwnTracks.</p>
<p><img alt="" src="https://raw.github.com/wiki/owntracks/owntracks/assets/friends/ios/ios-friends-08.png" /></p></div>
        </div>

	<footer class="col-md-12">
		<hr>
		
		<center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
	</footer>


        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>