<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OwnTracks Clients</title>
  
  
  <link rel="canonical" href="http://owntracks.org/guide/clients/">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link href="../../css/custom.css" rel="stylesheet">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script src="../../js/theme.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-9039631-4', 'sequelizejs.com');
    ga('send', 'pageview');
  </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home">OwnTracks</a>
    <!-- DISABLED JPM -->
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="../..">Intro</a>
            </li>
        

    
        
        <span class="toctree-l0">Guide</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../what/">What it does</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../how/">How it works</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../ui/">User interface</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../scenarios/">Scenarios</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../mqtt/">MQTT</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../topics/">Topics</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../broker/">Broker</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../apps/">Apps</a>
                    
                </li>
            
                <li class="toctree-l1 current">
                    <a class="current" href="./">Clients</a>
                    
                      
                        <ul>
                        
                            <li class="toctree-l2"><a href="#clients">Clients</a></li>
                            
                                <li><a class="toctree-l3" href="#mosquitto_sub">mosquitto_sub</a></li>
                            
                                <li><a class="toctree-l3" href="#o2s">o2s</a></li>
                            
                                <li><a class="toctree-l3" href="#pista">Pista</a></li>
                            
                                <li><a class="toctree-l3" href="#mqttwarn">mqttwarn</a></li>
                            
                                <li><a class="toctree-l3" href="#openhab">openHAB</a></li>
                            
                                <li><a class="toctree-l3" href="#roll-your-own">Roll your own</a></li>
                            
                                <li><a class="toctree-l3" href="#related">Related</a></li>
                            
                        
                        </ul>
                      
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../friends/">Friends</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../waypoints/">Waypoints</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../beacons/">iBeacons</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../bridge/">Bridging</a>
                    
                </li>
            
        

    
        
        <span class="toctree-l0">Features</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/hosted/">Hosted</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/security/">Security</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/tls/">TLS</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/location/">Location</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/tid/">TID</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/friends/">Friends</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/card/">Card</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/waypoints/">Waypoints</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/beacons/">Beacons</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/pedometer/">Pedometer</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/settings/">Settings</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/comparison/">Comparison</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/android/">Android</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/ios/">iOS</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/remoteconfig/">Remoteconfig</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../features/debug/">Debugging</a>
                    
                </li>
            
        

    
        
        <span class="toctree-l0">API</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../tech/json/">JSON</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../tech/program/">Code</a>
                    
                </li>
            
        

    
        
        <span class="toctree-l0">Sundry</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../terminology/">Terminology</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../privacy/">Privacy</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../people/">People</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../ideas/">Ideas</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../faq/">Answers</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../press/">Press</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="../.."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    <li>Clients</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/owntracks" class="icon icon-github"> GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h1 id="clients">Clients</h1>
<p>Using our OwnTracks app is cool, but what do you do with the location data the apps send (i.e. <em>publish</em>) to the MQTT broker? We have some suggestions. (Do remember however, that you cannot do this in <a href="../scenarios/"><em>public mode</em></a>.)</p>
<p>You know that OwnTracks <em>publishes</em> location information to an MQTT <em>broker</em>. The data it publishes is transferred in a particular format called <a href="http://json.org">JSON</a>, and <a href="../../tech/json/">this is what it looks like</a>.</p>
<p>When you've got your broker set up, and OwnTracks configured to use it, you'll want to do something useful with the data, and the following sections introduce you to some of the existing clients you can utilitze for doing that.</p>
<h2 id="mosquitto_sub">mosquitto_sub</h2>
<p><em>mosquitto_sub</em> is a very basic command-line client provided by the <a href="http://mosquitto.org">Mosquitto project</a>. However, it is brilliantly useful, and you can also use it for long-time collection of data by having it run in the background with <em>stdout</em> pointing to a file.</p>
<p>In it's most basic invocation, you have the program connect to your broker and subscribe to the topics you're interested in.</p>
<pre><code class="bash">mosquitto_sub -h localhost -p 1883 -v -t 'owntracks/#'
</code></pre>

<p><em>mosquitto_sub</em> and it's counterpart, <em>mosquitto_pub</em> for publishing to a broker, support a slew of options. It'll be worth your while to study their <a href="http://mosquitto.org/man/mosquitto_sub-1.html">manual page</a>.</p>
<h2 id="o2s">o2s</h2>
<p>One of the clients we provide as part of the Open Source OwnTracks project is called <em>o2s</em>; the strange name stands for <em>OwnTracks to Storage</em>, and we think you're going to want to have this connected to your <a href="../broker/">MQTT broker</a>, particularly in <a href="../scenarios/">Private mode</a>.</p>
<p>Correctly configured (and it's not trivial), <em>o2s</em> connects to your broker and subscribes to location messages and other <a href="../../tech/json/">OwnTracks payloads</a>. Upon receiving a location update, <em>o2s</em> will do a number of things:</p>
<ul>
<li>Perform a reverse-geo lookup (using your choice of either Google or XXX to do so) for the geographical coordinates received from the OwnTracks app</li>
<li>Store the message and its details into a database (MySQL and PostgreSQL are supported)</li>
<li>Alert via (future) plugins that a geographical region (<a href="../waypoints/">waypoint</a>) has been entered or left</li>
</ul>
<p>The result of using <em>o2s</em> is that you get a database table (several actually) in which your OwnTracks locations are stored.</p>
<pre><code>+---------------------+-----+------------+------------+------+--------------------------------------+
| tst                 | tid | lat        | lon        | cc   | addr                                 |
+---------------------+-----+------------+------------+------+--------------------------------------+
| 2015-05-27 06:23:36 | jJ  | 46.7835540 | 17.2073088 | HU   | Keszthely, Hévízi út, 8360 Ungarn    |
| 2015-05-26 20:10:52 | jJ  | 46.7710135 | 17.1829915 | HU   | Alsópáhok, 760, 8394 Ungarn          |
| 2015-05-26 14:32:50 | jJ  | 46.9557636 | 19.4132377 | HU   | Kerekegyháza, 5211, 6041 Ungarn      |
| 2015-05-23 22:42:27 | jJ  | 47.4986630 | 19.0438124 | HU   | Budapest, Eötvös tér, 1051 Ungarn    |
+---------------------+-----+------------+------------+------+--------------------------------------+
</code></pre>

<p>So, now that you have the OwnTracks locations being neatly stored for you, how do you visualize them on, say, a map, at a later point in time? Enter <em>Pista</em>.</p>
<h2 id="pista">Pista</h2>
<p><em>Pista</em> is a word which signifies <em>track</em> in Spanish and in Italian. It is, unfortunately, a very difficult bit of software to get installed, but we'll try to help you. <em>Pista</em> contains a whole kitchen-sink of features, most of which you won't need to use with our OwnTracks apps. (These features were built for the OwnTracks Greenwich devices.)</p>
<p>We'll concentrate on setting up <em>Pista</em>'s <em>Tracks</em> utility which will enable you to view past locations directly from the database tables which are updated by <em>o2s</em>.</p>
<h2 id="mqttwarn">mqttwarn</h2>
<p>You'll recall (we hope) the discussion on <a href="../mqtt/">MQTT</a> and the analogy with the cauldron. <em>mqttwarn</em>, while not specific to OwnTracks, is another client you connect to your <a href="../broker/">MQTT broker</a>. We think it's worth mentioning (and both Ben and JP -- the creators -- are quite pleased with what it does).</p>
<p><em>mqttwarn</em> lets you do things like tweet everytime OwnTracks reports a location (but do consider whether you <em>really</em> want that), send an e-mail when a loved one enters a particular region, etc.</p>
<h2 id="openhab">openHAB</h2>
<p>Presence detection in home automation is one of the most important pieces of the puzzle. Without it your smart home is effectively blind, and as a result can hardly be called 'smart' at all. There are very few automation rules that do not require some form of context in terms of human occupancy. Rules around security, lighting, music, even coffee machines -- all need to know if 'someone' is home before deciding whether to take action. </p>
<p>This is where OwnTracks steps in. In its simplest form it can be configured with waypoints (for home/work etc) that generate events whenever your phone enters/leaves these regions. These are sent to your own personal <a href="../broker/">MQTT broker</a> where your home automation software can react accordingly. The beauty of OwnTracks is two-fold - it is simple, you can disable the standard location reporting so all you get is the waypoint event/leave events, which is all your smart home cares about. The second is that, in <a href="../scenarios/"><em>private mode</em></a>, all your data is 'yours' and yours alone - there is no cloud service collecting, storing and potentially mining your data. </p>
<p>Read more about <a href="https://github.com/openhab/openhab/wiki/Mqttitude-Binding">openHAB and OwnTracks</a>.</p>
<h2 id="roll-your-own">Roll your own</h2>
<p>If you feel really brave, you can <a href="../../tech/program/">write your own program</a> which subscribes to OwnTracks data, but don't forget to tell us about it!</p>
<h2 id="related">Related</h2>
<p>Here are some projects we know of which use and/or integrate OwnTracks and/or
which are useful when using MQTT in general or OwnTracks in particular.</p>
<ul>
<li><a href="http://jpmens.net/2013/11/19/mqtt-inspector-for-ios/">MQTT Inspector for iOS</a>, written by Christoph Krey, who also did our OwnTracks for iOS app. This is an indispensible utility for all things MQTT.</li>
<li><a href="http://thethingsystem.com">the thing system</a> ( <a href="https://github.com/TheThingSystem/steward">code</a> )</li>
<li>A Clojure webapp that aims to manage information gathered from OwnTracks; <a href="https://github.com/razorinc/clojure-mqttitude-backend">clojure-mqttitude-backend</a></li>
<li>An <a href="http://flows.nodered.org/flow/ab31cd939f2e73503fb0">OwnTracks flow</a> by <a href="https://twitter.com/juzam">Giovanni @juzam Angoli</a> for Node-RED which publishes messages to <a href="https://pushover.net">pushover.net</a> upon entering or leaving a geo-fence.</li>
<li><a href="https://play.google.com/store/apps/details?id=at.tripwire.mqtt.client">MyMQTT</a> is an app for Android which enables you to subscribe and publish to an MQTT broker.</li>
<li>Stefano Costa cooks Italian pasta <a href="https://github.com/bluewindthings/butta-la-pasta">using OwnTracks</a>.</li>
</ul>
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../friends/" class="btn btn-neutral float-right" title="Friends"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../apps/" class="btn btn-neutral" title="Apps"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a>, using a 
  <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by 
  <a href="https://readthedocs.org">Read the Docs</a>. 
  <div style="float: right">
    &copy; OwnTracks
    2013 - <script>document.write(new Date().getFullYear());</script>. 
  </div>
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
            <!-- JPM <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a> -->
            <a class="icon icon-github" style="float: left; color: #fcfcfc" href="https://github.com/owntracks"> GitHub</a>
        
	<!-- JPM: these don't work (neither do they on Sequelize 
      <span><a href="" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="" style="color: #fcfcfc">Next &raquo;</a></span>
      -->
    </span>
</div>
</body>
</html>